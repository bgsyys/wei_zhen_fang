

# 雅雅餐饮管理系统

## 项目简介

雅雅餐饮管理系统是一套功能完备的餐饮行业解决方案，采用 **Spring Boot** 框架构建，实现了前后端分离架构。系统主要服务于两大用户群体：**C端用户**（顾客）用于在线点餐、支付及订单管理；**B端管理端**（商家）用于菜品管理、订单处理及营业数据分析。

## 核心功能

### 用户端功能
- **用户登录**：支持微信授权登录，获取用户信息。
- **菜品浏览**：按分类查看菜品列表，支持查看菜品详情及选择口味。
- **购物车**：灵活添加、减少购物车内商品。
- **订单系统**：支持在线下单、微信支付、订单状态追踪、历史订单查询及再来一单功能。
- **地址管理**：管理收货地址，支持设置默认地址。

### 管理端功能
- **员工管理**：员工的增删改查、账号启停及密码管理。
- **分类管理**：支持 Dish（菜品）和 Setmeal（套餐）分类的维护。
- **菜品/套餐管理**：菜品信息的增删改查、启售/停售、口味配置、套餐与菜品的关联管理。
- **订单管理**：实时接收新订单，支持接单、拒单、取消、配送、完结等全流程操作。
- **桌台管理**：支持餐桌的录入、状态更新（空闲/占用）及排序。
- **数据统计**：提供营业额、订单量、用户增长及热销商品排行榜等数据统计，并支持 Excel 报表导出。

## 技术栈

| 技术 | 用途 |
| :--- | :--- |
| **Spring Boot** | 应用核心框架 |
| **MyBatis** | 数据持久层框架 |
| **MySQL** | 关系型数据库 |
| **Redis** | 缓存管理、Session 存储、接口限流 |
| **JWT** | 用户身份认证与授权 |
| **WebSocket** | 实时订单推送通知 |
| **微信支付** | 集成 Native/JSAPI 支付能力 |
| **Spring Task** | 定时任务（处理超时订单） |
| **AOP** | 自动填充审计字段（创建/更新时间） |

## 项目结构

项目采用 Maven 多模块设计，主要分为以下三个部分：

```
yaya
├── common          # 公共基础模块
│   ├── constant    # 系统常量和消息定义
│   ├── context     # 当前用户上下文（基于 ThreadLocal）
│   ├── exception   # 自定义业务异常类
│   ├── properties  # 配置文件映射类（JWT、微信配置）
│   ├── result      # 统一接口返回结果封装
│   └── utils       # 通用工具类（JWT、HttpClient、微信支付）
│
├── pojo            # 实体与数据传输模块
│   ├── dto         # 数据传输对象（用于请求/响应）
│   ├── entity      # 数据库实体类
│   └── vo          # 视图对象（用于前端展示）
│
└── server          # 主业务服务模块
    ├── config      # WebMvc、Redis、WebSocket 配置
    ├── controller  # 控制器层（Admin 与 User 端分离）
    ├── interceptor # JWT 拦截器（管理员与用户鉴权）
    ├── mapper      # MyBatis Mapper 接口及 XML
    ├── service     # 业务逻辑层（Service 接口及实现）
    ├── task        # 定时任务处理（订单超时自动取消）
    └── websocket   # WebSocket 服务端（实时通信）
```

## 快速开始

### 环境准备
- JDK 1.8+
- Maven 3.x+
- MySQL 8.0+
- Redis

### 配置说明
在 `server/src/main/resources/application.yml` 或相应的环境配置文件中，配置数据库连接、Redis 连接以及第三方服务密钥：
- **数据库配置**：`spring.datasource` 相关配置。
- **Redis 配置**：`spring.redis` 相关配置。
- **JWT 配置**：`login-reg.jwt` 下的密钥与过期时间。
- **微信支付**：`hanye.wechat` 下的 AppID、商户号及密钥。

### 运行步骤
1. **初始化数据库**：创建数据库并执行项目提供的 SQL 脚本初始化表结构。
2. **启动 Redis**：确保 Redis 服务正常运行。
3. **构建与运行**：
   ```bash
   # 在项目根目录下
   mvn clean install -DskipTests
   
   # 启动服务端
   cd server
   mvn spring-boot:run
   ```

## License

本项目遵循开源协议，具体许可信息请查阅项目根目录 LICENSE 文件。